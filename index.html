<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetPal - Ù†ÙŠØªØ¨Ø§Ù„ Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T66Y8ENY24"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-T66Y8ENY24');
    </script>

    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <header class="main-header">
        <div class="container header-container">
            <a href="index.html" class="logo-link">
                <img src="images/logo.png" alt="Ø´Ø¹Ø§Ø± NetPal" class="logo-img">
                <h1>NetPal</h1>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="#services">Ø®Ø¯Ù…Ø§ØªÙ†Ø§</a></li>
                    <li><a href="#contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero-welcome-text">
        <div class="container">
            <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù†ÙŠØªØ¨Ø§Ù„</h2>
            <p>Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ø§Ù†ØªØ±Ù†Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆÙ†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ÙƒØ³Ø¨ Ø§Ù„Ù…Ø§Ù„ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</p>
            <a href="#services" class="btn btn-primary-dark">Ø§Ø³ØªÙƒØ´Ù Ø®Ø¯Ù…Ø§ØªÙ†Ø§</a>
        </div>
    </section>

    <div class="container slider-container-wrapper"> 
        <section class="hero-slider">
            <div class="slide" id="slide-1" style="background-image: url('images/hero-office.jpg');"></div>
            <div class="slide" id="slide-2" style="background-image: url('images/hero-abstract.jpg');"></div>
            
            <div class="animated-logo-container">
                <img src="images/logo-white.png" alt="NetPal Logo" class="animated-logo">
            </div>
        </section>
    </div>

    <section id="services" class="services-section">
        <div class="container">
            <h2>Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
            
            <div id="dynamic-services-container" class="services-grid">
                <p id="loading-text" style="text-align: center; width: 100%; font-size: 1.2rem;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª...</p>
            </div>
        </div>
    </section>

    <div id="whatsappModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h3 style="color: #043c4b; margin-bottom: 15px;">ØªÙˆØ§ØµÙ„ Ù„Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©</h3>
            <p style="margin-bottom: 20px; color: #666;">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ù…Ù…Ø«Ù„ÙŠ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©:</p>
            
            <button class="btn-whatsapp" onclick="sendToWhatsapp('NUMBER_1')">
                ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… (Ø±Ù‚Ù… 1)
            </button>
            
            <button class="btn-whatsapp" onclick="sendToWhatsapp('NUMBER_2')">
                ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… (Ø±Ù‚Ù… 2)
            </button>
        </div>
    </div>

    <section id="contact" class="contact-section">
        <div class="container">
            <h2>Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡ØŸ</h2>
            <p>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø£Ùˆ ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù….</p>
            <div class="contact-links">
                <a href="https://t.me/net_pal" target="_blank" class="btn btn-primary">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (@net_pal)</a>
                <a href="https://instagram.com/net.pal22" target="_blank" class="btn btn-secondary">Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù… (@net.pal22)</a>
            </div>
        </div>
    </section>

    <footer class="main-footer">
        <div class="container">
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025 - NetPal</p>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ
        const firebaseConfig = {
            apiKey: "AIzaSyB4CGTeNjW-X8QQtC97JT2PphZJfeClBuU",
            authDomain: "netpal-f4cbf.firebaseapp.com",
            projectId: "netpal-f4cbf",
            storageBucket: "netpal-f4cbf.firebasestorage.app",
            messagingSenderId: "801260964399",
            appId: "1:801260964399:web:d5d0b282e81c20144d14da"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // âœ… Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (ØªÙ… ÙˆØ¶Ø¹Ù‡Ø§ ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª)
        const PHONE_1 = "963997804468"; 
        const PHONE_2 = "963947810769"; 

        // Ù…ØªØºÙŠØ±Ø§Øª Ù„Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
        let currentServiceTitle = "";
        let currentServicePrice = "";
        let currentServiceFeatures = "";

        const container = document.getElementById('dynamic-services-container');

        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        db.collection("services").orderBy("timestamp", "desc").onSnapshot((querySnapshot) => {
            container.innerHTML = ""; // ØªÙ†Ø¸ÙŠÙ
            
            if (querySnapshot.empty) {
                container.innerHTML = "<p style='text-align:center; width:100%;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
            } else {
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    
                    // 1. ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙƒÙ€ HTML Ù„Ù„Ø¹Ø±Ø¶
                    let featuresHtml = '';
                    // 2. ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙƒÙ€ Ù†Øµ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
                    let featuresText = '';

                    if (data.features && Array.isArray(data.features)) {
                        featuresHtml = '<ul class="features-list">';
                        data.features.forEach(feat => {
                            featuresHtml += `<li>âœ… ${feat}</li>`;
                            featuresText += `- ${feat}\n`;
                        });
                        featuresHtml += '</ul>';
                    }

                    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ø¯Ø§Ù„Ø© (Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø£Ù‚ÙˆØ§Ø³ ÙˆØ§Ù„ÙÙˆØ§ØµÙ„)
                    const safeTitle = (data.title || "").replace(/'/g, "\\'");
                    const safeDesc = featuresText.replace(/'/g, "\\'").replace(/\n/g, "%0A");

                    const html = `
                        <div class="service-card">
                            <div class="card-header">
                                <h3>${data.title}</h3>
                            </div>
                            <div class="card-body">
                                <p class="desc">${data.description || ""}</p>
                                
                                ${featuresHtml}
                                
                                <div class="price-tag">${data.price}</div>
                                
                                <button class="btn-main" onclick="openModal('${safeTitle}', '${data.price}', '${safeDesc}')">
                                    Ø§Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©
                                </button>
                            </div>
                        </div>
                    `;
                    container.innerHTML += html;
                });
            }
        }, (error) => {
            console.error("Firebase Error:", error);
            container.innerHTML = `
                <div style='text-align:center; color:red; padding:20px;'>
                    <p>ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª.</p>
                    <p style='font-size:0.8rem; color:#666;'>ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ Ø£Ø¶ÙØª danibtr.github.io ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Authentication > Settings > Authorized Domains</p>
                </div>`;
        });

        // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ---

        function openModal(title, price, features) {
            currentServiceTitle = title;
            currentServicePrice = price;
            currentServiceFeatures = features;
            document.getElementById('whatsappModal').style.display = "flex";
        }

        function closeModal() {
            document.getElementById('whatsappModal').style.display = "none";
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· ÙÙŠ Ø§Ù„Ø®Ø§Ø±Ø¬
        window.onclick = function(event) {
            if (event.target == document.getElementById('whatsappModal')) {
                closeModal();
            }
        }

        // --- Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ (ØªØ®ØªØ§Ø± Ø§Ù„Ø±Ù‚Ù… Ø­Ø³Ø¨ Ø§Ù„Ø²Ø±) ---
        function sendToWhatsapp(agent) {
            let phone = (agent === 'NUMBER_1') ? PHONE_1 : PHONE_2;
            
            let text = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©: *${currentServiceTitle}*\n`;
            text += `Ø§Ù„Ø³Ø¹Ø±: ${currentServicePrice}\n`;
            
            if(currentServiceFeatures) {
                text += `\nØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©:\n${decodeURIComponent(currentServiceFeatures)}`;
            }
            
            let url = `https://wa.me/${phone}?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
            closeModal();
        }
    </script>

</body>
</html>