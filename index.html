<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetPal - Ù†ÙŠØªØ¨Ø§Ù„ Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T66Y8ENY24"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-T66Y8ENY24');
    </script>

    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        #error-debug-box {
            background-color: #ffe6e6;
            border: 2px solid #d8000c;
            color: #d8000c;
            padding: 15px;
            margin: 20px auto;
            border-radius: 8px;
            text-align: left;
            direction: ltr;
            display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            font-family: monospace;
            font-size: 14px;
            max-width: 90%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <header class="main-header">
        <div class="container header-container">
            <a href="index.html" class="logo-link">
                <img src="images/logo.png" alt="Ø´Ø¹Ø§Ø± NetPal" class="logo-img">
                <h1>NetPal</h1>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="#services">Ø®Ø¯Ù…Ø§ØªÙ†Ø§</a></li>
                    <li><a href="#contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero-welcome-text">
        <div class="container">
            <h2>Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù†ÙŠØªØ¨Ø§Ù„</h2>
            <p>Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ø§Ù†ØªØ±Ù†Øª Ù…ØªÙ†ÙˆØ¹Ø© ÙˆÙ†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ ÙƒØ³Ø¨ Ø§Ù„Ù…Ø§Ù„ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.</p>
            <a href="#services" class="btn btn-primary-dark">Ø§Ø³ØªÙƒØ´Ù Ø®Ø¯Ù…Ø§ØªÙ†Ø§</a>
        </div>
    </section>

    <div class="container slider-container-wrapper"> 
        <section class="hero-slider">
            <div class="slide" id="slide-1" style="background-image: url('images/hero-office.jpg');"></div>
            <div class="slide" id="slide-2" style="background-image: url('images/hero-abstract.jpg');"></div>
            <div class="animated-logo-container">
                <img src="images/logo-white.png" alt="NetPal Logo" class="animated-logo">
            </div>
        </section>
    </div>

    <section id="services" class="services-section">
        <div class="container">
            <h2>Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©</h2>
            
            <div id="error-debug-box"></div>

            <div id="dynamic-services-container" class="services-grid">
                <p id="loading-text" style="text-align: center; width: 100%; font-size: 1.2rem;">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
            </div>
        </div>
    </section>

    <div id="whatsappModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h3 style="color: #043c4b; margin-bottom: 15px;">ØªÙˆØ§ØµÙ„ Ù„Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©</h3>
            <p style="margin-bottom: 20px; color: #666;">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ù…Ù…Ø«Ù„ÙŠ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©:</p>
            <button class="btn-whatsapp" onclick="sendToWhatsapp('NUMBER_1')">ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… (Ø±Ù‚Ù… 1)</button>
            <button class="btn-whatsapp" onclick="sendToWhatsapp('NUMBER_2')">ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… (Ø±Ù‚Ù… 2)</button>
        </div>
    </div>

    <section id="contact" class="contact-section">
        <div class="container">
            <h2>Ù‡Ù„ Ø£Ù†Øª Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡ØŸ</h2>
            <p>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø£Ùˆ ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù….</p>
            <div class="contact-links">
                <a href="https://t.me/net_pal" target="_blank" class="btn btn-primary">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (@net_pal)</a>
                <a href="https://instagram.com/net.pal22" target="_blank" class="btn btn-secondary">Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù… (@net.pal22)</a>
            </div>
        </div>
    </section>

    <footer class="main-footer">
        <div class="container">
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025 - NetPal</p>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
        function showError(msg, detail) {
            const box = document.getElementById('error-debug-box');
            const container = document.getElementById('dynamic-services-container');
            
            box.style.display = 'block';
            box.innerHTML = `<strong>âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£:</strong><br>${msg}<br><br><strong>Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</strong><br>${detail}`;
            
            container.innerHTML = ""; // Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        }

        const firebaseConfig = {
            apiKey: "AIzaSyB4CGTeNjW-X8QQtC97JT2PphZJfeClBuU",
            authDomain: "netpal-f4cbf.firebaseapp.com",
            projectId: "netpal-f4cbf",
            storageBucket: "netpal-f4cbf.firebasestorage.app",
            messagingSenderId: "801260964399",
            appId: "1:801260964399:web:d5d0b282e81c20144d14da"
        };

        const PHONE_1 = "963997804468"; 
        const PHONE_2 = "963947810769"; 
        let currentServiceTitle = "", currentServicePrice = "", currentServiceFeatures = "";

        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
            const container = document.getElementById('dynamic-services-container');

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            db.collection("services").orderBy("timestamp", "desc").onSnapshot((querySnapshot) => {
                // Ø¥Ø®ÙØ§Ø¡ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„
                document.getElementById('error-debug-box').style.display = 'none';
                container.innerHTML = "";

                if (querySnapshot.empty) {
                    container.innerHTML = "<p style='text-align:center; width:100%; color:#666;'>Ù†Ø¬Ø­ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ ÙˆÙ„ÙƒÙ† Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¯Ù…Ø§Øª Ù…Ø¶Ø§ÙØ© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
                } else {
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        let featuresHtml = '';
                        let featuresText = '';
                        if (data.features && Array.isArray(data.features)) {
                            featuresHtml = '<ul class="features-list">';
                            data.features.forEach(feat => {
                                featuresHtml += `<li>âœ… ${feat}</li>`;
                                featuresText += `- ${feat}\n`;
                            });
                            featuresHtml += '</ul>';
                        }
                        const safeTitle = (data.title || "").replace(/'/g, "\\'");
                        const safeDesc = featuresText.replace(/'/g, "\\'").replace(/\n/g, "%0A");

                        const html = `
                            <div class="service-card">
                                <div class="card-header"><h3>${data.title}</h3></div>
                                <div class="card-body">
                                    <p class="desc">${data.description || ""}</p>
                                    ${featuresHtml}
                                    <div class="price-tag">${data.price}</div>
                                    <button class="btn-main" onclick="openModal('${safeTitle}', '${data.price}', '${safeDesc}')">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
                                </div>
                            </div>
                        `;
                        container.innerHTML += html;
                    });
                }
            }, (error) => {
                // Ù‡Ù†Ø§ ÙŠØªÙ… ØµÙŠØ¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ¹Ø±Ø¶Ù‡Ø§
                console.error("Firebase Error:", error);
                
                if (error.code === 'permission-denied') {
                    showError("ØªÙ… Ø±ÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„ (Permission Denied).", "Ø§Ù„Ø³Ø¨Ø¨: Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ù…Ø§Ù† (Rules) ØªÙ…Ù†Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø£Ùˆ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡.");
                } else if (error.code === 'unavailable') {
                    showError("Ø§Ù„Ø®Ø¯Ù…Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© (Unavailable).", "ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŒ Ø£Ùˆ Ù‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø­Ø¬ÙˆØ¨Ø© ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ (Ø¬Ø±Ø¨ VPN).");
                } else {
                    showError("ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.", error.message + " (Code: " + error.code + ")");
                }
            });

        } catch (e) {
            showError("Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹.", e.message);
        }

        function openModal(title, price, features) {
            currentServiceTitle = title;
            currentServicePrice = price;
            currentServiceFeatures = features;
            document.getElementById('whatsappModal').style.display = "flex";
        }
        function closeModal() { document.getElementById('whatsappModal').style.display = "none"; }
        window.onclick = function(event) { if (event.target == document.getElementById('whatsappModal')) closeModal(); }
        function sendToWhatsapp(agent) {
            let phone = (agent === 'NUMBER_1') ? PHONE_1 : PHONE_2;
            let text = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©: *${currentServiceTitle}*\nØ§Ù„Ø³Ø¹Ø±: ${currentServicePrice}\n`;
            if(currentServiceFeatures) text += `\nØªÙØ§ØµÙŠÙ„:\n${decodeURIComponent(currentServiceFeatures)}`;
            let url = `https://wa.me/${phone}?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
            closeModal();
        }
    </script>
</body>
</html>